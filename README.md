# smotrim-rss
Инструмент для создания RSS-лент подкастов с сайта `smotrim.ru`

Этот парсер можно использовать для преобразования страниц подкастов с веб-сайта
`smotrim.ru` в формат RSS-лент с возможностью последующей загрузки в репозиторий
GitHub.

## Установка

### Требования

- Linux (WSL для Windows).

### Fork репозитория

Выполните fork репозитория, используя кнопку `Fork` на странице репозитория.

### Клонируйте свой репозиторий

```
$ git clone git@github.com:your/repository.git
```

## Использование

В папке `bin` расположены следующие скрипты:

### Скрипты для работы с фидами

1. **`add-feed.sh`** - Скрипт для добавления фида. 
Генерирует файлы с rss-заголовком.
2. **`update-feed.sh`** - Скрипт для обновления фида. 
Наполняет файл фида информацией со страницы.

#### Общие параметры для `add-feed.sh` и `update-feed.sh`:
- **ID подкаста** - идентификатор подкаста, с которым работают скрипты.
- **Флаги**:
    - `KEEPTMP` - позволяет отключить удаление временных файлов.
    - `COMMIT` - коммитит изменения в локальный репозиторий.

### Скрипт для обновления всех фидов

3. **`update-all-feeds.sh`** - Скрипт для обновления всех фидов,
 лежащих в папке `feeds`.

- **Флаги**:
    - `SHOWDIFF` - выводит разницу между новым и старым состоянием папки `feeds`.

## Автоматизация

### GitHub Pages

Для размещения фидов можно воспользоваться `GitHub Pages`. Для этого:

1. Перейдите в настройки репозитория.
2. Выберите ветку в разделе `Pages`.

При переходе на главную репозитория в `GitHub Pages`, откроется страница с
каталогом добавленных подкастов.

### GitHub Actions

По умолчанию репозиторий содержит файл `.github/workflows/cron-update-all-feeds.yaml`,
представляющий собой задачи для `GitHub Actions`, обновляющие все фиды из папки
`feeds` каждый день в 6 утра по Московскому времени.

Для отключения этой функции удалите файл `.github/workflows/cron-update-all-feeds.yaml` 
в удалённом репозитории.